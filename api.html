<!doctype html>
<html class="no-js" lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>API ∙ Universal Router</title>
    <meta name="description" content="Routing and navigation solution for React.js applications">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <base href="https://www.kriasoft.com/universal-router/">
    <link rel="shortcut icon" href="/universal-router/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700">
    <link rel="stylesheet" href="/universal-router/main.css">
  </head>
  <body>
  <div class="header">
  <div class="container">
    <a class="header__logo" href="/universal-router/">
      Universal <img class="header__logo-img" src="/universal-router/img/tour.svg" alt="Universal Router" /> Router
    </a>
    <span class="header_author">
      made with &nbsp;♥&nbsp; by&nbsp; <a href="https://twitter.com/koistya" rel="author" title="Konstantin Tarkus on Twitter">@koistya</a>
    </span>
    
  </div>
</div>


  <div class="content">
    <div class="content-left">
      <a class="edit-btn" target="_blank" href="https://github.com/kriasoft/react-routing/edit/master/docs/api.md" title="Edit on GitHub">
        <svg class="edit-icon" xmlns="http://www.w3.org/2000/svg" width="612" height="612" viewBox="0 0 612 612"><path d="M545.062 286.875c-15.854 0-28.688 12.852-28.688 28.688v239.062h-459v-459h239.062c15.854 0 28.688-12.852 28.688-28.688S312.292 38.25 296.438 38.25H38.25C17.136 38.25 0 55.367 0 76.5v497.25C0 594.883 17.136 612 38.25 612H535.5c21.114 0 38.25-17.117 38.25-38.25V315.562c0-15.835-12.833-28.687-28.688-28.687zM605.325 88.95L523.03 6.655C518.556 2.18 512.684 0 506.812 0s-11.743 2.18-16.218 6.675l-318.47 318.45v114.75h114.75l318.45-318.45c4.494-4.495 6.675-10.366 6.675-16.237 0-5.89-2.18-11.743-6.675-16.238zM267.75 382.5H229.5v-38.25L506.812 66.938l38.25 38.25L267.75 382.5z"/></svg>
      </a>
      <h1>Universal Router API</h1>
<h2><code>resolve(routes, { path, ...context })</code> ⇒ <code>Promise&lt;any&gt;</code></h2>
<p>Traverses the list of routes in the order they are defined until it finds the first route that
matches provided URL path string and whose action method returns anything other than <code>null</code> or <code>undefined</code>.</p>
<pre><code class="language-js">import { resolve } from 'universal-router';

const routes = [
  {
    path: '/one',
    action: () =&gt; 'Page One'
  },
  {
    path: '/two',
    action: () =&gt; `Page Two`
  }
];

resolve(routes, { path: '/one' })
  .then(result =&gt; console.log(result));
  // =&gt; Page One
</code></pre>
<p>Where <code>action</code> is just a regular function that may, or may not, return any arbitrary data
— a string, a React component, anything!</p>
<h2>Nested Routes</h2>
<p>Each route may have an optional <code>children: [ ... ]</code> property containing the list of child routes:</p>
<pre><code class="language-js">const routes = {
  path: '/admin',
  children: [
    {
      path: '/',                       // www.example.com/admin
      action: () =&gt; 'Admin Page'
    },
    {
      path: '/users',
      children: [
        {
          path: '/',                   // www.example.com/admin/users
          action: () =&gt; 'User List'
        },
        {
          path: '/:username',          // www.example.com/admin/users/john
          action: () =&gt; 'User Profile'
        }
      ]
    }
  ]
};

resolve(routes, { path: '/admin/users/john' })
  .then(result =&gt; console.log(result));
  // =&gt; User Profile
</code></pre>
<h2>URL Parameters</h2>
<p><strong>Named route parameters</strong> are captured and added to <code>context.params</code>.</p>
<pre><code class="language-js">const routes = [
  {
    path: '/hello/:username',
    action: (context) =&gt; `Welcome, ${context.params.username}!`
  }
];

resolve(routes, { path: '/hello/john' })
  .then(result =&gt; console.log(result));
  // =&gt; Welcome, john!
</code></pre>
<p>Alternatively, captured parameters can be accessed via the second argument to an action method like so:</p>
<pre><code class="language-js">const routes = [
  {
    path: '/hello/:username',
    action: (ctx, { username }) =&gt; `Welcome, ${username}!`
  }
];

resolve(routes, { path: '/hello/john' })
  .then(result =&gt; console.log(result));
  // =&gt; Welcome, john!
</code></pre>
<p>This functionality is powered by <a href="https://github.com/pillarjs/path-to-regexp">path-to-regexp</a> npm module
and works the same way as the routing solutions in many popular JavaScript frameworks such as Express and Koa.
Also check out online <a href="http://forbeslindesay.github.io/express-route-tester/">router tester</a>.</p>
<h2>Context</h2>
<p>In addition to a URL path string, any arbitrary data can be passed to the router's <code>resolve()</code> method,
that becomes available inside action methods.</p>
<pre><code class="language-js">const routes = [
  {
    path: '/hello',
    action(context) {
      return `Welcome, ${context.user}!`
    }
  }
];

resolve(routes, { path: '/hello', user: 'admin' })
  .then(result =&gt; console.log(result));
  // =&gt; Welcome, admin!
</code></pre>
<h2>Async Routes</h2>
<p>The router works great with asynchronous functions out of the box!</p>
<pre><code class="language-js">const routes = [
  {
    path: '/hello/:username',
    async action({ params }) {
      const resp = await fetch(`/api/users/${params.username}`);
      const user = await resp.json();
      if (user) return `Welcome, ${user.displayName}!`;
    }
  }
];

resolve(routes, { path: '/hello/john' })
  .then(result =&gt; console.log(result));
  // =&gt; Welcome, John Brown!
</code></pre>
<p>Use <a href="http://babeljs.io/">Babel</a> to transpile your code with <code>async</code> / <code>await</code> to normal JavaScript.
Alternatively, stick to ES6 Promises:</p>
<pre><code class="language-js">const route = {
  path: '/hello/:username',
  action({ params }) {
    return fetch(`/api/users/${params.username}`)
      .then(resp =&gt; resp.json())
      .then(user =&gt; user &amp;&amp; `Welcome, ${user.displayName}!`);
  }
};
</code></pre>
<h2>Middlewares</h2>
<p>Any route action function may act as a <strong>middleware</strong> by calling <code>context.next()</code>.</p>
<pre><code class="language-js">const routes = [
  {
    path: '/',
    async action({ next }) {
      console.log('middleware: start');
      const child = await next();
      console.log('middleware: end');
      return child;
    },
    children: [
      {
        path: '/hello',
        action() {
          console.log('route: return a result');
          return 'Hello, world!';
        }
      }
    ]
  }
];

resolve(routes, { path: '/hello' });

// Prints:
//   middleware: start
//   route: return a result
//   middleware: end
</code></pre>
<p>...</p>
<p>Sorry, the rest of the guide is currently under development. Come back soon.</p>

      
      <div id="disqus_thread"></div>
      
    </div>
  </div>
  <div class="footer">
  <div class="container clearfix">
    <p class="footer__left">Licensed under the MIT license</p>
    <p class="footer__right">&copy; 2015-2016 <a href="https://www.kriasoft.com">Kriasoft</a></p>
  </div>
</div>

  <script src="https://kriasoft.disqus.com/embed.js" async>
  <script>
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='https://www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-33821884-1','auto');ga('send','pageview');
    window.disqus_shortname = 'kriasoft';
    window.disqus_identifier = 'react-routing/api';
    window.disqus_title = 'API ∙ Universal Router';
    window.disqus_url = 'http://www.kriasoft.com/react-routing/api';
  </script>
  </body>
</html>
